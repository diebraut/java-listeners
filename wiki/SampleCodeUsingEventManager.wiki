#summary Sample code on using Event Manager

= Introduction =

This is a sample code on using Event Manager.


= Details =

{{{
public class EventManagerTests implements IEventSender {

    public class SimpleEventArgs implements IEventArgs {

        /**
		 * 
		 */
        private static final long serialVersionUID = 3234184912851137576L;

        private final int mValue;

        public SimpleEventArgs(int value) {
            mValue = value;
        }

        public int getValue() {
            return mValue;
        }
    }

    public class EventListener implements IEventListener {

        IEventSender isDefaultEventHandlerSender = null;
        IEventArgs isDefaultEventHandlerCalled = null;
        Throwable isEventHandlerFailedException = null;

        public void onEvent(IEventSender sender, IEventArgs args) {
            isDefaultEventHandlerSender = sender;
            isDefaultEventHandlerCalled = args;
        }

        Integer isIntegerEventCalled = null;

        @EventHandler(Integer.class)
        public void onIntegerEvent(IEventSender sender, EventArgs<Integer> args) {
            isIntegerEventCalled = args.getData();
        }

        SimpleEventArgs isSimpleEventArgsCalled = null;

        @EventHandler(SimpleEventArgs.class)
        public void onSimpleEvent(IEventSender sender, SimpleEventArgs args) {
            isSimpleEventArgsCalled = args;
        }

        @EventHandler(String.class)
        public void onStringEvent(IEventSender sender, EventArgs<String> args) {
            throw new RuntimeException();
        }

    }

    @Test
    public void emTest() {

        EventListener listener = new EventListener();

        IEventSender eventSender = new IEventSender() {};

        QueueEventManager eventManager = new QueueEventManager();

        eventManager.addListener(listener);

        EventArgs<EventListener> event = new EventArgs<EventListener>(listener);

        IEventListener invoker = eventManager.invoker();

        invoker.onEvent(eventSender, event);
        invoker.onEvent(eventSender, new EventArgs<Integer>(1));
        invoker.onEvent(eventSender, new SimpleEventArgs(1));

        invoker.onEvent(eventSender, new EventArgs<String>("123456"));

        try {
            Thread.sleep(5000);
        }
        catch (InterruptedException ignored) {}

        Assert.assertEquals(eventSender, listener.isDefaultEventHandlerSender);
        Assert.assertEquals(event, listener.isDefaultEventHandlerCalled);
        Assert.assertEquals(event.getData(), listener);

        Assert.assertEquals(1, listener.isIntegerEventCalled.intValue());
        Assert.assertEquals(1, listener.isSimpleEventArgsCalled.getValue());
    }
}

}}}